extends layout

block localscripts
		script(src='/socketlib/socket.io.js')
		script(src='/javascripts/attendeeClient.js')

block content

	h1= title

	div(id='attendee-core-dynamic-info')
	
		if error
			p
				| error

		else
			if !data
				p
					| searching for cookie...
			else 
				div(id='attendee-info', class='invisible', data-attendeeid=data.attendee._id)

				h2
					| Queues to Join

				div(class='container-fluid')
					div(class='row')
						each queue in data.queuesAttendeeIsNotIn
							div(class='col-sm-4')
								| #{queue.attractionName}
							div(class='col-sm-8')
								span(class='button'
									onclick='handleQueueChange(event)'
									data-queue-change-url=queue.url + '/addAttendee/:' + data.attendee._id
									data-queue-change-type='join')
									| join queue
						else
							div(class='col-sm-4')
								| no queues to join

				h2
					| Queues Attendee Is In

				div(class='container-fluid')
					div(class='row')
						each item in data.attendeeInQueues
							div(class='col-sm-4')
								| #{item.queue.attractionName}
							div(class='col-sm-8')
								span(class='button'
									onclick='handleQueueChange(event)'
									data-queue-change-url=item.queue.url + '/removeAttendee/:' + item.attendee
									data-queue-change-type='leave')
									| leave queue

						else
							div(class='col-sm-4')
								| not in any queues
